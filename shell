from new.models import *
u1 = User.objects.create_user('username1'))
u2 = User.objects.create_user('username2'))
a1 = Author.objects.create(user=u1)
a2 = Author.objects.create(user=u2)
c1 = Category.objects.create('crime')
c2 = Category.objects.create('top')
c3 = Category.objects.create('selected')
c4 = Category.objects.create('fantasy')
ar1 = Post.objects.create(author = a1, title = 'abs',article_or_news = 'AR',text = 'Gasdhqwsad')
ar2 = Post.objects.create(author = a2, title = 'abss',article_or_news = 'AR',text = 'AFASDFasdas')
ne1 = Post.objects.create(author = a2, title = 'ab',article_or_news = 'NE',text = 'AFAasdasgasdasSDFasdas')
ar1.category.add(*[c1,c2])
ar2.category.add(*[c3,c2])
ne1.category.add(c3)
com1 = Commnet.objects.create(post = ar1,user=u1,comment_text = 'dabadabdab')
com2 = Commnet.objects.create(post = ar2,user=u1,comment_text = 'asgasdas')
com3 = Commnet.objects.create(post = ar2,user=u2,comment_text = 'dagasdbadabdab')
com4 = Commnet.objects.create(post = ne1,user=u2,comment_text = 'zxcsagdabadabdab')
com1.like()
com2.like()
ar1.like()
ar1.like()
ar1.like()
ar1.dislike()
ne1.like()
ar2.like()
a1.update_rating()
a2.update_rating()
author_with_best_rating = Author.objects.order_by('-rating').select_related('user').first()
post_with_best_rating = Post.objects.order_by('-rating').select_related('author__user',).first()
post_as_tuple = post_with_best_rating.as_tuple()
commnets_to_post_with_best_rating = Comment.objects.get(post = post_with_best_rating)
commnets_to_post_with_best_rating.values()
